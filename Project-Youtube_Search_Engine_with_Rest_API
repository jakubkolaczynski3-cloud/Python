# Import tkinter for GUI
import tkinter as tk
#import requsts for API
import requests


#in this API Key you need to visit ... and generate your own API Key, remember to don't show your private generated API Keys
API_KEY = 'Your_API_Key' 

#API key you can get on https://console.cloud.google.com

#Definition of 
def search_youtube():
    searcher = text_box.get("1.0", tk.END).strip()
    if not searcher:
        result_list.delete(0, tk.END)
        result_list.insert(tk.END, "Please enter a search term.")
        return

# URL to YOUTUBE searcher table for Tile of video and name of Channel
    Title_and_channel = 'https://www.googleapis.com/youtube/v3/search'

# parameters to search 
    params_search = {
        'part': 'snippet',
        'q': searcher,
        'maxResults': 3,
        'type': 'video',
        'key': API_KEY
    }
# Send GET request to YouTube API first table with parameters language undarstabele by JSON and data 
    response_search = requests.get(Title_and_channel, params=params_search)
    data_search = response_search.json()


# Check if 'items' key exists and contains results
    if 'items' not in data_search or len(data_search['items']) == 0:
        result_list.delete(0, tk.END)
        result_list.insert(tk.END, "No videos found.")
        return
    

#Create another variable for statistic
    video_statistics = [item['id']['videoId'] for item in data_search['items']]

# Views are need to get from diffrent table then first one and we must create secound connection
    videos_views_url = 'https://www.googleapis.com/youtube/v3/videos'
    params_videos = {
        'part': 'snippet,statistics',
        'id': ','.join(video_statistics),
        'key': API_KEY
    }
# Send GET request to YouTube API secound table with parameters language undarstabele by JSON and data 
    response_videos = requests.get(videos_views_url, params=params_videos)
    data_videos = response_videos.json()


# Iterate over each video item in the response
    result_list.delete(0, tk.END)
    for video in data_videos['items']:
        title = video['snippet']['title']
        channel = video['snippet']['channelTitle']
        views = video['statistics'].get('viewCount', 'N/A')
        result_list.insert(tk.END, f"Title: {title}")
        result_list.insert(tk.END, f"Channel: {channel}")
        result_list.insert(tk.END, f"Views: {views}")
        result_list.insert(tk.END, "")  # blank line for spacing

# Create main window
window = tk.Tk()
window.title("Youtube Searcher")
window.geometry("400x350")

# Create a label
label = tk.Label(window, text="What video you want to find?")
label.pack(pady=30)

# Create a text input box
text_box = tk.Text(window, height=1, width=20)
text_box.pack()


# Create a button
button = tk.Button(window, text="Search", command=search_youtube)
button.pack(pady=10)

# result list
result_list = tk.Listbox(window, width=60, height=11)
result_list.pack(pady=10, fill='both')

# Run the window
window.mainloop()

